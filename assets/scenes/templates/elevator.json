{
	"components": {
		"sound": {
			"file": "dryer.ogg",
			"type": "Ambisonic",
			"volume": 0.1
		},
		"animation": {
			"interpolation": "Cubic",
			"states": [
				{
					"delay": 10,
					"translate": [0, 160, 0],
					"translate_tangent": [0, 0, 0]
				},
				{
					"delay": 10,
					"translate": [0, 120, 0],
					"translate_tangent": [0, -7, 0]
				},
				{
					"delay": 10,
					"translate": [0, 40, 0],
					"translate_tangent": [0, -7, 0]
				},
				{
					"delay": 10,
					"translate": [0, 0.1, 0],
					"translate_tangent": [0, 0, 0]
				}
			]
		},
		"signal_output": {},
		"signal_bindings": {
			"at_floor": "scoperoot/animation_state == scoperoot/animation_target",
			"up_requested": "door/open_timer_up < 0 && !door/open_timer_up_enable",
			"down_requested": "door/open_timer_down < 0 && !door/open_timer_down_enable",
			"requested_floor": "scoperoot/down_requested ? 3 : (scoperoot/up_requested ? 0 : scoperoot/animation_target)"
		},
		"event_input": {},
		"event_bindings": {
			"/elevator/request_up": {
				"target": "door/reset_timer/open_timer_up",
				"set_value": -10
			},
			"/elevator/request_down": {
				"target": "door/reset_timer/open_timer_down",
				"set_value": -10
			}
		},
		"script": [
			{
				"onTick": "elevator"
			},
			{
				"onTick": "signal_from_event",
				"parameters": {
					"outputs": ["animation_target"]
				}
			},
			{
				"onTick": "physics_debounce",
				"parameters": {
					"delay_frames": 1,
					"input": "scoperoot/at_floor",
					"output": "animation_complete"
				}
			},
			{
				"onTick": "edge_trigger",
				"parameters": {
					"input_expr": "scoperoot/animation_complete && scoperoot/animation_target != scoperoot/requested_floor && door.lock/animation_state == 0",
					"output_event": "/set_signal/animation_target",
					"no_falling": true,
					"set_event_value": "scoperoot/requested_floor"
				}
			}
		],
		"transform": {
			"translate": [0, 160, 0]
		}
	},
	"entities": [
		{
			"name": "platform",
			"renderable": {
				"model": "box"
			},
			"transform": {
				"parent": "scoperoot",
				"translate": [0, -0.25, -1],
				"scale": [4.2, 0.5, 4]
			},
			"physics": {
				"shapes": {
					"model": "box"
				},
				"type": "Kinematic"
			}
		},
		{
			"name": "ceiling",
			"renderable": {
				"model": "box"
			},
			"transform": {
				"parent": "scoperoot",
				"translate": [0, 4.15, -1],
				"scale": [4.2, 0.5, 4]
			},
			"physics": {
				"shapes": {
					"model": "box"
				},
				"type": "Kinematic"
			}
		},
		{
			"name": "right_front_wall",
			"renderable": {
				"model": "box"
			},
			"transform": {
				"parent": "scoperoot",
				"translate": [2, 2, -2.07],
				"scale": [0.2, 4, 1.85]
			},
			"physics": {
				"shapes": {
					"model": "box"
				},
				"type": "Kinematic"
			}
		},
		{
			"name": "right_back_wall",
			"renderable": {
				"model": "box"
			},
			"transform": {
				"parent": "scoperoot",
				"translate": [2, 2, 0.07],
				"scale": [0.2, 4, 1.85]
			},
			"physics": {
				"shapes": {
					"model": "box"
				},
				"type": "Kinematic"
			}
		},
		{
			"name": "left_front_wall",
			"renderable": {
				"model": "box"
			},
			"transform": {
				"parent": "scoperoot",
				"translate": [-2, 2, -2.07],
				"scale": [0.2, 4, 1.85]
			},
			"physics": {
				"shapes": {
					"model": "box"
				},
				"type": "Kinematic"
			}
		},
		{
			"name": "left_back_wall",
			"renderable": {
				"model": "box"
			},
			"transform": {
				"parent": "scoperoot",
				"translate": [-2, 2, 0.07],
				"scale": [0.2, 4, 1.85]
			},
			"physics": {
				"shapes": {
					"model": "box"
				},
				"type": "Kinematic"
			}
		},
		{
			"name": "back_left_wall",
			"renderable": {
				"model": "box"
			},
			"transform": {
				"parent": "scoperoot",
				"translate": [-1.07, 2, 0.9],
				"scale": [1.85, 4, 0.2]
			},
			"physics": {
				"shapes": {
					"model": "box"
				},
				"type": "Kinematic"
			}
		},
		{
			"name": "back_right_wall",
			"renderable": {
				"model": "box"
			},
			"transform": {
				"parent": "scoperoot",
				"translate": [1.07, 2, 0.9],
				"scale": [1.85, 4, 0.2]
			},
			"physics": {
				"shapes": {
					"model": "box"
				},
				"type": "Kinematic"
			}
		},
		{
			"name": "entry_laser",
			"transform": {
				"parent": "scoperoot"
			},
			"laser_line": {
				"color": [0, 0, 1],
				"points": [
					[-1.95, 1.5, -2.9],
					[1.95, 1.5, -2.9]
				]
			}
		},
		{
			"name": "light",
			"transform": {
				"parent": "scoperoot",
				"translate": [0, 3.85, -1],
				"rotate": [[270, 1, 0, 0]]
			},
			"light": {
				"tint": [1, 0.5, 0.5],
				"intensity": 100,
				"spotAngle": 50
			},
			"script": {
				"prefab": "template",
				"parameters": { "source": "spotlight" }
			}
		},
		{
			"name": "door",
			"transform": {
				"parent": "scoperoot",
				"translate": [0, 0.0, -2.9],
				"rotate": [90, 0, 1, 0],
				"scale": [1, 1.5, 2.3]
			},
			"event_input": {},
			"signal_output": {},
			"signal_bindings": {
				"door_open": "scoperoot/at_floor && ((scoperoot/animation_state == 0 && door/open_timer_up < 0) || (scoperoot/animation_state == 3 && door/open_timer_down < 0))",
				"open_timer_up_enable": "door/open_timer_up < 0 && door.left-panel/animation_state == 1 && scoperoot/animation_state == 0",
				"open_timer_down_enable": "door/open_timer_down < 0 && door.left-panel/animation_state == 1 && scoperoot/animation_state == 3"
			},
			"script": [
				{
					"prefab": "template",
					"parameters": { "source": "slide_door" }
				},
				{
					"onTick": "timer",
					"parameters": {
						"names": ["open_timer_up", "open_timer_down"]
					}
				}
			]
		},
		{
			"name": "up_button",
			"transform": {
				"parent": "scoperoot",
				"translate": [1.95, 1.2, -2]
			},
			"signal_bindings": {
				"light": "up_button/button_pressed || scoperoot/up_requested"
			},
			"event_bindings": {
				"/button/press": "scoperoot/elevator/request_up"
			},
			"script": {
				"prefab": "template",
				"parameters": {
					"source": "button"
				}
			}
		},
		{
			"name": "down_button",
			"transform": {
				"parent": "scoperoot",
				"translate": [1.95, 1.08, -2]
			},
			"signal_bindings": {
				"light": "down_button/button_pressed || scoperoot/down_requested"
			},
			"event_bindings": {
				"/button/press": "scoperoot/elevator/request_down"
			},
			"script": {
				"prefab": "template",
				"parameters": {
					"source": "button"
				}
			}
		}
	]
}
